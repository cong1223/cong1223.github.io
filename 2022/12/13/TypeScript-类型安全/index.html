<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="å°èªå¿™"><meta name="copyright" content="å°èªå¿™"><meta name="generator" content="Hexo 5.3.0"><meta name="theme" content="hexo-theme-yun"><title>TypeScript ç±»å‹å®‰å…¨ | èªå¿™çš„å°ç«™-Code &amp; Rock</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.22/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"cong1223.github.io","root":"/","title":"èªå¿™çš„å°ç«™","version":"1.4.0","mode":"auto","copycode":true,"page":{"isPost":true},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"algolia":{"appID":"FPFBIG0SN1","apiKey":"f75714621d5494f13edbe7a616932224","indexName":"hexo-blog","hits":{"per_page":8},"labels":{"input_placeholder":"æœç´¢æ–‡ç« ","hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits_stats":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’"}},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="TypeScript ç±»å‹å®‰å…¨å‰è¨€TypeScript ä¸­æœ‰å¾ˆå¤šåœ°æ–¹æ¶‰åŠåˆ°å­ç±»å‹ subtypeã€çˆ¶ç±»å‹ supertypeã€åå˜ Covariant ã€é€†å˜ Contravariantã€åŒå‘åå˜ Bivariant å’Œä¸å˜ Invariantçš„æ¦‚å¿µï¼Œå¦‚æœæä¸æ¸…è¿™äº›æ¦‚å¿µï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½è¢«æŠ¥é”™æçš„æ— ä»ä¸‹æ‰‹ï¼Œæˆ–è€…åœ¨å†™ä¸€äº›å¤æ‚ç±»å‹çš„æ—¶å€™çœ‹åˆ°åˆ«äººå¯ä»¥è¿™ä¹ˆå†™ï¼Œä½†æ˜¯ä¸çŸ¥é“å®ƒçš„ç¼˜ç”±ã€‚ extendså…³é”®å­—åœ¨Type">
<meta property="og:type" content="article">
<meta property="og:title" content="TypeScript ç±»å‹å®‰å…¨">
<meta property="og:url" content="https://cong1223.github.io/2022/12/13/TypeScript-%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8/index.html">
<meta property="og:site_name" content="èªå¿™çš„å°ç«™-Code &amp; Rock">
<meta property="og:description" content="TypeScript ç±»å‹å®‰å…¨å‰è¨€TypeScript ä¸­æœ‰å¾ˆå¤šåœ°æ–¹æ¶‰åŠåˆ°å­ç±»å‹ subtypeã€çˆ¶ç±»å‹ supertypeã€åå˜ Covariant ã€é€†å˜ Contravariantã€åŒå‘åå˜ Bivariant å’Œä¸å˜ Invariantçš„æ¦‚å¿µï¼Œå¦‚æœæä¸æ¸…è¿™äº›æ¦‚å¿µï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½è¢«æŠ¥é”™æçš„æ— ä»ä¸‹æ‰‹ï¼Œæˆ–è€…åœ¨å†™ä¸€äº›å¤æ‚ç±»å‹çš„æ—¶å€™çœ‹åˆ°åˆ«äººå¯ä»¥è¿™ä¹ˆå†™ï¼Œä½†æ˜¯ä¸çŸ¥é“å®ƒçš„ç¼˜ç”±ã€‚ extendså…³é”®å­—åœ¨Type">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-12-13T09:09:04.000Z">
<meta property="article:modified_time" content="2022-01-16T06:39:20.558Z">
<meta property="article:author" content="å°èªå¿™">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="å°èªå¿™"><img width="96" loading="lazy" src="/images/ghostwang.jpeg" alt="å°èªå¿™"><span class="site-author-status" title="Looking for dawn.">ğŸŒ‘</span></a><div class="site-author-name"><a href="/about/">å°èªå¿™</a></div><a class="site-name" href="/about/site.html">èªå¿™çš„å°ç«™-Code &amp; Rock</a><sub class="site-subtitle">è®°å½•åˆ†äº«å‰ç«¯é¢†åŸŸæŠ€æœ¯åšæ–‡</sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">72</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">15</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">66</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://jq.qq.com/?_wv=1027&amp;k=g4dnBzs9" title="QQ ç¾¤ 94500464" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/cong1223" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/5861177611" title="å¾®åš" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=436106908" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/94308826" title="å“”å“©å“”å“©" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://cdn.jsdelivr.net/gh/cong1223/cloudimg@master/img/20210131133736.png" title="å¾®ä¿¡å…¬ä¼—å·" target="_blank" style="color:#1AAD19"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-2-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:1215524451@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="å–œæ¬¢çš„å¥³å­©å­" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#TypeScript-%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8"><span class="toc-number">1.</span> <span class="toc-text">TypeScript ç±»å‹å®‰å…¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.0.1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#extends%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.0.2.</span> <span class="toc-text">extendså…³é”®å­—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B%E5%8C%B9%E9%85%8D"><span class="toc-number">1.0.3.</span> <span class="toc-text">å­—é¢é‡ç±»å‹åŒ¹é…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#never"><span class="toc-number">1.0.4.</span> <span class="toc-text">never</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E5%80%BC%E5%8C%B9%E9%85%8D"><span class="toc-number">1.0.5.</span> <span class="toc-text">å¤æ‚ç±»å‹å€¼åŒ¹é…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.0.6.</span> <span class="toc-text">çˆ¶å­ç±»å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%98%E8%B5%B7"><span class="toc-number">1.0.7.</span> <span class="toc-text">ç¼˜èµ·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%86%E5%8F%98%E5%8D%8F%E5%8F%98"><span class="toc-number">1.0.8.</span> <span class="toc-text">é€†å˜åå˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E5%8F%98%EF%BC%88Covariance%EF%BC%89"><span class="toc-number">1.0.8.1.</span> <span class="toc-text">åå˜ï¼ˆCovarianceï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%86%E5%8F%98%EF%BC%88Contravariance%EF%BC%89"><span class="toc-number">1.0.8.2.</span> <span class="toc-text">é€†å˜ï¼ˆContravarianceï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8C%E5%90%91%E5%8D%8F%E5%8F%98"><span class="toc-number">1.0.9.</span> <span class="toc-text">åŒå‘åå˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%B1%9E%E6%80%A7%E4%B8%8E%E5%87%BD%E6%95%B0%E6%96%B9%E6%B3%95"><span class="toc-number">1.0.10.</span> <span class="toc-text">å‡½æ•°å±æ€§ä¸å‡½æ•°æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Array"><span class="toc-number">1.0.11.</span> <span class="toc-text">Array</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E5%8F%98%E6%95%B0%E6%8D%AE"><span class="toc-number">1.0.11.1.</span> <span class="toc-text">å¯å˜æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E5%AE%89%E5%85%A8%E7%9A%84%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.0.11.2.</span> <span class="toc-text">æ›´å®‰å…¨çš„æ•°ç»„ç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.0.12.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.0.13.</span> <span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://cong1223.github.io/2022/12/13/TypeScript-%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="å°èªå¿™"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="èªå¿™çš„å°ç«™-Code &amp; Rock"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">TypeScript ç±»å‹å®‰å…¨</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-13 17:09:04" itemprop="dateCreated datePublished" datetime="2022-12-13T17:09:04+08:00">2022-12-13</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-01-16 14:39:20" itemprop="dateModified" datetime="2022-01-16T14:39:20+08:00">2022-01-16</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="æœ¬æ–‡å­—æ•°">3.8k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="é˜…è¯»æ—¶é•¿">16m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/typescript/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">typescript</span></a></span></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h1 id="TypeScript-ç±»å‹å®‰å…¨"><a href="#TypeScript-ç±»å‹å®‰å…¨" class="headerlink" title="TypeScript ç±»å‹å®‰å…¨"></a>TypeScript ç±»å‹å®‰å…¨</h1><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>TypeScript ä¸­æœ‰å¾ˆå¤šåœ°æ–¹æ¶‰åŠåˆ°å­ç±»å‹ <code>subtype</code>ã€çˆ¶ç±»å‹ <code>supertype</code>ã€åå˜ <code>Covariant</code> ã€é€†å˜ <code>Contravariant</code>ã€åŒå‘åå˜ <code>Bivariant</code> å’Œä¸å˜ <code>Invariant</code>çš„æ¦‚å¿µï¼Œå¦‚æœæä¸æ¸…è¿™äº›æ¦‚å¿µï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½è¢«æŠ¥é”™æçš„æ— ä»ä¸‹æ‰‹ï¼Œæˆ–è€…åœ¨å†™ä¸€äº›å¤æ‚ç±»å‹çš„æ—¶å€™çœ‹åˆ°åˆ«äººå¯ä»¥è¿™ä¹ˆå†™ï¼Œä½†æ˜¯ä¸çŸ¥é“å®ƒçš„ç¼˜ç”±ã€‚</p>
<h3 id="extendså…³é”®å­—"><a href="#extendså…³é”®å­—" class="headerlink" title="extendså…³é”®å­—"></a>extendså…³é”®å­—</h3><p>åœ¨TypeScriptä¸­ï¼Œextendså…³é”®å­—åœ¨ä¸åŒåº”ç”¨åœºæ™¯ä¸‹æœ‰ä»¥ä¸‹ä¸‰ç§å«ä¹‰ï¼š</p>
<ol>
<li><strong>è¡¨ç¤ºç»§æ‰¿/æ‹“å±•çš„å«ä¹‰:</strong></li>
</ol>
<p>ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> weight: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">public</span> age: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">wang</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æ±ªï¼&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">bark</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">miao</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å–µ~&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»§æ‰¿ç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Animal &#123;</span><br><span class="line">  age: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Dog <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">  bark: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">// Dog =&gt; &#123; age: number; bark(): void &#125;</span></span><br></pre></td></tr></table></figure>


<ol start="2">
<li><strong>è¡¨ç¤ºçº¦æŸçš„å«ä¹‰</strong></li>
</ol>
<p>åœ¨ä¹¦å†™æ³›å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å¯¹ç±»å‹å‚æ•°ä½œä¸€å®šçš„é™åˆ¶ï¼Œæ¯”å¦‚å¸Œæœ›ä¼ å…¥çš„å‚æ•°éƒ½æœ‰ name å±æ€§çš„æ•°ç»„æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCnames</span>&lt;<span class="title">T</span> <span class="title">extends</span> </span>&#123; name: <span class="built_in">string</span> &#125;&gt;(entities: T[]):<span class="built_in">string</span>[] &#123;</span><br><span class="line">  <span class="keyword">return</span> entities.map(<span class="function"><span class="params">entity</span> =&gt;</span> entity.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ol start="3">
<li><strong>è¡¨ç¤ºåˆ†é…çš„å«ä¹‰ï¼ˆå¯èµ‹å€¼æ€§ <code>assignable</code>ï¼‰</strong></li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Animal = &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Dog = &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  bark: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Bool = Dog <span class="keyword">extends</span> Animal ? <span class="string">&#x27;yes&#x27;</span> : <span class="string">&#x27;no&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹é‡ç‚¹ä»‹ç»è¡¨ç¤ºåˆ†é…å«ä¹‰ï¼Œä¹Ÿå°±æ˜¯å¯èµ‹å€¼æ€§çš„ä¸€äº›ç”¨æ³•</p>
<h3 id="å­—é¢é‡ç±»å‹åŒ¹é…"><a href="#å­—é¢é‡ç±»å‹åŒ¹é…" class="headerlink" title="å­—é¢é‡ç±»å‹åŒ¹é…"></a>å­—é¢é‡ç±»å‹åŒ¹é…</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Equal&lt;X, Y&gt; = X <span class="keyword">extends</span> Y ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Num = Equal&lt;<span class="number">1</span>, <span class="number">1</span>&gt;; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">type</span> Str = Equal&lt;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> Boo1 = Equal&lt;<span class="literal">true</span>, <span class="literal">false</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> Boo2 = Equal&lt;<span class="literal">true</span>, <span class="built_in">boolean</span>&gt;; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><strong>å®¹æ˜“æ··æ·†ï¼šç±»å‹<code>X</code>å¯ä»¥åˆ†é…ç»™ç±»å‹<code>Y</code>ï¼Œè€Œä¸æ˜¯è¯´ç±»å‹<code>X</code>æ˜¯ç±»å‹<code>Y</code>çš„å­é›†</strong></p>
<h3 id="never"><a href="#never" class="headerlink" title="never"></a>never</h3><p>å®ƒè‡ªç„¶è¢«åˆ†é…çš„ä¸€äº›ä¾‹å­ï¼š</p>
<ul>
<li>ä¸€ä¸ªä»æ¥ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°ï¼ˆå¦‚ï¼šå¦‚æœå‡½æ•°å†…å«æœ‰ <code>while(true) &#123;&#125;</code>ï¼‰ï¼›</li>
<li>ä¸€ä¸ªæ€»æ˜¯ä¼šæŠ›å‡ºé”™è¯¯çš„å‡½æ•°ï¼ˆå¦‚ï¼š<code>function foo() &#123; throw new Error(&#39;Not Implemented&#39;) &#125;</code>ï¼Œ<code>foo</code> çš„è¿”å›ç±»å‹æ˜¯ <code>never</code>ï¼‰ï¼›</li>
</ul>
<p><strong>neveræ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A = <span class="built_in">never</span> <span class="keyword">extends</span> <span class="string">&#x27;x&#x27;</span> ? <span class="built_in">string</span> : <span class="built_in">number</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> P&lt;T&gt; = T <span class="keyword">extends</span> <span class="string">&#x27;x&#x27;</span> ? <span class="built_in">string</span> : <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">type</span> B = P&lt;<span class="built_in">never</span>&gt;</span><br></pre></td></tr></table></figure>
<h3 id="å¤æ‚ç±»å‹å€¼åŒ¹é…"><a href="#å¤æ‚ç±»å‹å€¼åŒ¹é…" class="headerlink" title="å¤æ‚ç±»å‹å€¼åŒ¹é…"></a>å¤æ‚ç±»å‹å€¼åŒ¹é…</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> weight: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">public</span> age: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">wang</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;wang&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">bark</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">miao</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;miao&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Equal&lt;X, Y&gt; = X <span class="keyword">extends</span> Y ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> Boo = Equal(Dog, Animal)</span><br><span class="line"><span class="keyword">type</span> Boo = Equal(Animal, Dog)</span><br></pre></td></tr></table></figure>


<p><code>type Boo = Equal(Animal, Dog) // false</code> è¿™æ˜¯å› ä¸º<code> Animal</code> æ²¡æœ‰<code>bark</code>å±æ€§ï¼Œç±»å‹<code>Animal</code>ä¸æ»¡è¶³ç±»å‹<code>Dog</code>çš„ç±»å‹çº¦æŸã€‚å› æ­¤ï¼Œ<code>A extends B</code>ï¼Œæ˜¯æŒ‡<strong>ç±»å‹<code>A</code>å¯ä»¥<code>åˆ†é…ç»™</code>ç±»å‹<code>B</code>ï¼Œè€Œä¸æ˜¯è¯´ç±»å‹<code>A</code>æ˜¯ç±»å‹<code>B</code>çš„å­é›†</strong>ï¼Œç†è§£<code>extends</code>åœ¨ç±»å‹ä¸‰å…ƒè¡¨è¾¾å¼é‡Œçš„ç”¨æ³•éå¸¸é‡è¦ã€‚</p>
<h3 id="çˆ¶å­ç±»å‹"><a href="#çˆ¶å­ç±»å‹" class="headerlink" title="çˆ¶å­ç±»å‹"></a>çˆ¶å­ç±»å‹</h3><p>è¿˜æ˜¯ä»¥åŠ¨ç‰©ç±»åšæ¯”å–»ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Animal &#123;</span><br><span class="line">  age: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Dog <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">  bark: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> animal: Animal</span><br><span class="line"><span class="keyword">let</span> dog: Dog</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>Animal</code> æ˜¯ <code>Dog</code> çš„çˆ¶ç±»ï¼Œ<code>Dog</code>æ˜¯<code>Animal</code>çš„å­ç±»å‹ï¼Œå­ç±»å‹çš„å±æ€§æ¯”çˆ¶ç±»å‹æ›´å¤šï¼Œæ›´å…·ä½“ã€‚</p>
<ul>
<li>åœ¨ç±»å‹ç³»ç»Ÿä¸­ï¼Œå±æ€§æ›´å¤šçš„ç±»å‹æ˜¯å­ç±»å‹ã€‚</li>
<li>åœ¨é›†åˆè®ºä¸­ï¼Œå±æ€§æ›´å°‘çš„é›†åˆæ˜¯å­é›†ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»å‹æ˜¯çˆ¶ç±»å‹çš„è¶…é›†ï¼Œè€Œçˆ¶ç±»å‹æ˜¯å­ç±»å‹çš„å­é›†ï¼Œè¿™æ˜¯ç›´è§‰ä¸Šå®¹æ˜“ææ··çš„ä¸€ç‚¹ã€‚</p>
<p>è®°ä½ä¸€ä¸ªç‰¹å¾ï¼Œå­ç±»å‹æ¯”çˆ¶ç±»å‹æ›´åŠ <strong>å…·ä½“</strong>ï¼Œè¿™ç‚¹å¾ˆå…³é”®ã€‚</p>
<p>ä¸Šè¿°ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºï¼Œ<code>animal</code> æ˜¯ä¸€ä¸ªã€Œæ›´å®½æ³›ã€çš„ç±»å‹ï¼Œå®ƒçš„å±æ€§æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥æ›´ã€Œå…·ä½“ã€çš„å­ç±»å‹æ˜¯å¯ä»¥èµ‹å€¼ç»™å®ƒçš„ï¼Œå› ä¸ºä½ æ˜¯çŸ¥é“ <code>animal</code> ä¸Šåªæœ‰ <code>age</code> è¿™ä¸ªå±æ€§çš„ï¼Œä½ åªä¼šå»ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œ<code>dog</code> ä¸Šæ‹¥æœ‰ <code>animal</code> æ‰€æ‹¥æœ‰çš„ä¸€åˆ‡ç±»å‹ï¼Œèµ‹å€¼ç»™ <code>animal</code> æ˜¯ä¸ä¼šå‡ºç°<strong>ç±»å‹å®‰å…¨é—®é¢˜</strong>çš„ã€‚</p>
<p>åä¹‹ï¼Œå¦‚æœ <code>dog = animal</code>ï¼Œé‚£ä¹ˆåç»­ä½¿ç”¨è€…ä¼šæœŸæœ› <code>dog</code> ä¸Šæ‹¥æœ‰ <code>bark</code> å±æ€§ï¼Œå½“ä»–è°ƒç”¨äº† <code>dog.bark()</code> å°±ä¼šå¼•å‘è¿è¡Œæ—¶çš„å´©æºƒã€‚</p>
<p>ä»å¯èµ‹å€¼æ€§è§’åº¦æ¥è¯´ï¼Œå­ç±»å‹æ˜¯å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å‹çš„ï¼Œä¹Ÿå°±æ˜¯ <code>çˆ¶ç±»å‹å˜é‡ = å­ç±»å‹å˜é‡</code> æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå­ç±»å‹ä¸Šæ¶µç›–äº†çˆ¶ç±»å‹æ‰€æ‹¥æœ‰çš„çš„ä¸€åˆ‡å±æ€§ã€‚</p>
<p>å½“æˆ‘åˆå­¦çš„æ—¶å€™ï¼Œæˆ‘ä¼šè§‰å¾— <code>T extends &#123;&#125;</code> è¿™æ ·çš„è¯­å¥å¾ˆå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆå¯ä»¥ <code>extends</code> ä¸€ä¸ªç©ºç±»å‹å¹¶ä¸”åœ¨ä¼ é€’ä»»æ„ç±»å‹æ—¶éƒ½æˆç«‹å‘¢ï¼Ÿå½“ææ˜ç™½ä¸Šé¢çš„çŸ¥è¯†ç‚¹ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿè‡ªç„¶è¿åˆƒè€Œè§£äº†ã€‚</p>
<p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œç®—æ˜¯åŸºæœ¬è®²å®Œäº†extendsçš„ä¸‰ç§ç”¨æ³•ï¼Œä»¥ä¸‹è¿›å…¥æ­£é¢˜ï¼šé€†å˜åå˜ã€åŒå‘åå˜å’Œä¸å˜</p>
<hr>
<h3 id="ç¼˜èµ·"><a href="#ç¼˜èµ·" class="headerlink" title="ç¼˜èµ·"></a>ç¼˜èµ·</h3><p>tså†™ä¹…äº†ï¼Œæœ‰æ¬¡åœ¨ä¸ºæŸä¸ªç»„ä»¶å†™propsç±»å‹çš„æ—¶å€™éœ€è¦ä¼ ä¸€ä¸ªonClickçš„æ—¶é—´å‡½æ•°ç±»å‹æ—¶çªç„¶æœ‰ä¸ªé—®é¢˜æ¶Œç°è„‘æµ·ï¼š</p>
<p>ä¸ºä»€ä¹ˆåœ¨interfaceé‡Œé¢å®šä¹‰å‡½æ•°ç±»å‹éƒ½æ˜¯å†™æˆå‡½æ•°å±æ€§è€Œä¸æ˜¯æ–¹æ³•ï¼Œå³:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Props &#123;</span><br><span class="line">  handleClick: <span class="function">(<span class="params">arg: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">number</span>   <span class="comment">// æ™®éå†™æ³•</span></span><br><span class="line">  handleClick(arg: <span class="built_in">string</span>): <span class="built_in">number</span>  <span class="comment">// éä¸»æµå†™æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»ˆäºåœ¨typescript-eslintä¸­çœ‹åˆ°è§„åˆ™é›†æ—¶é‡åˆ°äº†è¿™ä¸ªè§„åˆ™</p>
<p><a target="_blank" rel="noopener" href="https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/docs/rules/method-signature-style.md">@typescript-eslint/method-signature-style</a></p>
<p>è§„åˆ™æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<p>âŒ Incorrect</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> T1 &#123;</span><br><span class="line">  func(arg: <span class="built_in">string</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> T2 = &#123;</span><br><span class="line">  func(arg: <span class="built_in">boolean</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">interface</span> T3 &#123;</span><br><span class="line">  func(arg: <span class="built_in">number</span>): <span class="built_in">void</span>;</span><br><span class="line">  func(arg: <span class="built_in">string</span>): <span class="built_in">void</span>;</span><br><span class="line">  func(arg: <span class="built_in">boolean</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>âœ… Correct</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> T1 &#123;</span><br><span class="line">  func: <span class="function">(<span class="params">arg: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> T2 = &#123;</span><br><span class="line">  func: <span class="function">(<span class="params">arg: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// this is equivalent to the overload</span></span><br><span class="line"><span class="keyword">interface</span> T3 &#123;</span><br><span class="line">  func: (<span class="function">(<span class="params">arg: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>) &amp;</span><br><span class="line">    (<span class="function">(<span class="params">arg: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>) &amp;</span><br><span class="line">    (<span class="function">(<span class="params">arg: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="built_in">void</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<blockquote>
<p>A method and a function property of the same type behave differently. Methods are always bivariant in their argument, while function properties are contravariant in their argument under <code>strictFunctionTypes</code>.</p>
<p>ç›¸åŒç±»å‹çš„æ–¹æ³•å’Œå‡½æ•°å±æ€§çš„è¡Œä¸ºä¸åŒã€‚æ–¹æ³•åœ¨å®ƒä»¬çš„å‚æ•°ä¸­æ€»æ˜¯åŒå˜çš„ï¼Œè€Œå‡½æ•°å±æ€§åœ¨ä¸¥æ ¼åŠŸèƒ½ç±»å‹ä¸‹çš„å‚æ•°ä¸­æ˜¯é€†å˜çš„ã€‚</p>
</blockquote>
<p>çœ‹åˆ°è¿™å¥è¯åä¹Ÿæ˜¯ä¸€è„¸æ‡µé€¼ï¼Œç¬¬ä¸€æ¬¡è§åˆ°åŒå‘åå˜å’Œé€†å˜è¿™ä¸¤ä¸ªè¯ï¼Œäºæ˜¯æŸ¥é˜…èµ„æ–™æ‰¾åˆ°äº†ä»–ä»¬çš„æ¦‚å¿µä»¥åŠå»¶ä¼¸çš„åå˜å’Œä¸å˜</p>
<h3 id="é€†å˜åå˜"><a href="#é€†å˜åå˜" class="headerlink" title="é€†å˜åå˜"></a>é€†å˜åå˜</h3><p>å…ˆæ¥æ®µ<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%8D%8F%E5%8F%98%E4%B8%8E%E9%80%86%E5%8F%98">ç»´åŸºç™¾ç§‘çš„å®šä¹‰</a>ï¼š</p>
<blockquote>
<p>åå˜ä¸é€†å˜(covariance and contravariance)æ˜¯åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæè¿°å…·æœ‰çˆ¶/å­å‹åˆ«å…³ç³»çš„å¤šä¸ªå‹åˆ«é€šè¿‡å‹åˆ«æ„é€ å™¨ã€æ„é€ å‡ºçš„å¤šä¸ªå¤æ‚å‹åˆ«ä¹‹é—´æ˜¯å¦æœ‰çˆ¶/å­å‹åˆ«å…³ç³»çš„ç”¨è¯­ã€‚</p>
</blockquote>
<p>å’¦ï¼Œçˆ¶/å­å‹åˆ«å…³ç³»å‰é¢å¥½åƒä¹Ÿæåˆ°è¿‡ï¼Œç„¶åè¯´èµ·é€†å˜å’Œåå˜ï¼Œåˆè¦æåˆ°å‰é¢è¯´çš„å¯åˆ†é…æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæ–‡ç« å¼€å¤´è¦èŠ±å¤§ç¯‡å¹…å»ä»‹ç»<code>extends</code>å…³é”®å­—çš„åŸå› ï¼Œåœ¨tsä¸­å†³å®šç±»å‹ä¹‹é—´çš„å¯åˆ†é…æ€§æ˜¯åŸºäºç»“æ„åŒ–ç±»å‹ï¼ˆ<code>structural typing</code>ï¼‰çš„</p>
<h4 id="åå˜ï¼ˆCovarianceï¼‰"><a href="#åå˜ï¼ˆCovarianceï¼‰" class="headerlink" title="åå˜ï¼ˆCovarianceï¼‰"></a>åå˜ï¼ˆCovarianceï¼‰</h4><p>é‚£ä¹ˆæƒ³è±¡ä¸€ä¸‹ï¼Œç°åœ¨æˆ‘ä»¬åˆ†åˆ«æœ‰è¿™ä¸¤ä¸ªå­ç±»å‹çš„æ•°ç»„ï¼Œä»–ä»¬ä¹‹é—´çš„çˆ¶å­å…³ç³»åº”è¯¥æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿæ²¡é”™ï¼Œ<code>Animal[]</code> ä¾ç„¶æ˜¯ <code>Dog[]</code> çš„çˆ¶ç±»å‹ï¼Œå¯¹äºè¿™æ ·çš„ä¸€æ®µä»£ç ï¼ŒæŠŠå­ç±»å‹èµ‹å€¼ç»™çˆ¶ç±»å‹ä¾ç„¶æ˜¯å®‰å…¨çš„ï¼ˆå…¼å®¹çš„ï¼‰ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Animal &#123;</span><br><span class="line">  age: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Dog <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">  bark: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> animals: Animal[]</span><br><span class="line"><span class="keyword">let</span> dogs: Dog[]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½ ç”¨äº†ä¸€ä¸ªæ›´åŠ å…·ä½“çš„ç±»å‹å»æ¥æ”¶åŸæ¥çš„Animalç±»å‹äº†ï¼Œæ­¤æ—¶ä½ çš„ç±»å‹æ˜¯å®‰å…¨çš„ï¼Œanimalæœ‰çš„dogè‚¯å®šæœ‰</span></span><br><span class="line">animals = dogs  <span class="comment">// å…¼å®¹,å­ï¼ˆDogï¼‰å˜çˆ¶ï¼ˆAnimalï¼‰ï¼ˆå¤šå˜å°‘ï¼‰åªè¦ä¸€ä¸ªç±»å‹åŒ…å« ageï¼Œæˆ‘å°±å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå’Œ Animal å…¼å®¹çš„ç±»å‹ã€‚å› æ­¤ dog å¯ä»¥æˆåŠŸèµ‹å€¼ç»™ animalï¼Œè€Œå¯¹äºå¤šå‡ºæ¥çš„ bark() æ–¹æ³•ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</span></span><br><span class="line"></span><br><span class="line">dog = animal <span class="comment">// ä¸å…¼å®¹</span></span><br></pre></td></tr></table></figure>
<p>è½¬å˜æˆæ•°ç»„ä¹‹åï¼Œå¯¹äºçˆ¶ç±»å‹çš„å˜é‡ï¼Œæˆ‘ä»¬ä¾ç„¶åªä¼šå»æ‰¾ <code>Dog</code> ç±»å‹ä¸­ä¸€å®šæœ‰çš„é‚£äº›å±æ€§ï¼ˆå› ä¸ºå­ç±»å‹æ›´åŠ å…·ä½“ï¼Œçˆ¶ç±»å‹æœ‰çš„å±æ€§å­ç±»å‹éƒ½æœ‰ï¼‰</p>
<p>é‚£ä¹ˆï¼Œå¯¹äº <code>type MakeArray&lt;T&gt; = T[]</code> è¿™ä¸ªç±»å‹æ„é€ å™¨æ¥è¯´ï¼Œå®ƒå°±æ˜¯ <strong><code>åå˜ï¼ˆCovarianceï¼‰</code></strong> çš„ã€‚</p>
<h4 id="é€†å˜ï¼ˆContravarianceï¼‰"><a href="#é€†å˜ï¼ˆContravarianceï¼‰" class="headerlink" title="é€†å˜ï¼ˆContravarianceï¼‰"></a>é€†å˜ï¼ˆContravarianceï¼‰</h4><p>é€†å˜ç¡®å®æ¯”è¾ƒéš¾æ‡‚ï¼Œå…ˆåšä¸€ä¸ªæœ‰ï¼ˆæ— ï¼‰è¶£ï¼ˆèŠï¼‰çš„é¢˜ï¼ˆæ¥æºï¼šã€Šæ·±å…¥ç†è§£TypeScriptã€‹ï¼‰</p>
<p>å¼€å§‹åšé¢˜ä¹‹å‰æˆ‘ä»¬å…ˆçº¦å®šå¦‚ä¸‹çš„æ ‡è®°ï¼š</p>
<ul>
<li><code>A â‰¼ B</code> æ„å‘³ç€ <code>A</code> æ˜¯ <code>B</code> çš„å­ç±»å‹ã€‚</li>
<li><code>A â†’ B</code> æŒ‡çš„æ˜¯ä»¥ <code>A</code> ä¸ºå‚æ•°ç±»å‹ï¼Œä»¥ <code>B</code> ä¸ºè¿”å›å€¼ç±»å‹çš„å‡½æ•°ç±»å‹ã€‚</li>
<li><code>x : A</code> æ„å‘³ç€ <code>x</code> çš„ç±»å‹ä¸º <code>A</code>ã€‚</li>
</ul>
<p><strong>é—®é¢˜</strong>ï¼šä»¥ä¸‹å“ªç§ç±»å‹æ˜¯ <code>Dog â†’ Dog</code> çš„å­ç±»å‹å‘¢ï¼Ÿ</p>
<ol>
<li><code>Greyhound â†’ Greyhound</code></li>
<li><code>Greyhound â†’ Animal</code></li>
<li><code>Animal â†’ Animal</code></li>
<li><code>Animal â†’ Greyhound</code></li>
</ol>
<p>è®©æˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸‹å¦‚ä½•è§£ç­”è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆæˆ‘ä»¬å‡è®¾ <code>f</code> æ˜¯ä¸€ä¸ªä»¥ <code>Dog â†’ Dog</code> ä¸ºå‚æ•°çš„å‡½æ•°ã€‚å®ƒçš„è¿”å›å€¼å¹¶ä¸é‡è¦ï¼Œä¸ºäº†å…·ä½“æè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å‡è®¾å‡½æ•°ç»“æ„ä½“æ˜¯è¿™æ ·çš„ï¼š <code>f : (Dog â†’ Dog) â†’ String</code>ã€‚</p>
<p>ç°åœ¨æˆ‘æƒ³ç»™å‡½æ•° <code>f</code> ä¼ å…¥æŸä¸ªå‡½æ•° <code>g</code> æ¥è°ƒç”¨ã€‚æˆ‘ä»¬æ¥ç§ç§å½“ <code>g</code> ä¸ºä»¥ä¸Šå››ç§ç±»å‹æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µã€‚</p>
<p><strong>1. æˆ‘ä»¬å‡è®¾ <code>g : Greyhound â†’ Greyhound</code>ï¼Œ <code>f(g)</code> çš„ç±»å‹æ˜¯å¦å®‰å…¨ï¼Ÿ</strong></p>
<p>ä¸å®‰å…¨ï¼Œå› ä¸ºåœ¨få†…è°ƒç”¨å®ƒçš„å‚æ•°<code>(g)</code>å‡½æ•°æ—¶ï¼Œä½¿ç”¨çš„å‚æ•°å¯èƒ½æ˜¯ä¸€ä¸ªä¸åŒäºç°ç‹—ä½†åˆæ˜¯ç‹—çš„å­ç±»å‹ï¼Œä¾‹å¦‚ <code>GermanShepherd</code> ï¼ˆç‰§ç¾ŠçŠ¬ï¼‰ã€‚</p>
<p><strong>2. æˆ‘ä»¬å‡è®¾ <code>g : Greyhound â†’ Animal</code>ï¼Œ <code>f(g)</code> çš„ç±»å‹æ˜¯å¦å®‰å…¨ï¼Ÿ</strong></p>
<p>ä¸å®‰å…¨ã€‚ç†ç”±åŒ(1)ã€‚</p>
<p><strong>3. æˆ‘ä»¬å‡è®¾ <code>g : Animal â†’ Animal</code>ï¼Œ <code>f(g)</code> çš„ç±»å‹æ˜¯å¦å®‰å…¨ï¼Ÿ</strong></p>
<p>ä¸å®‰å…¨ã€‚å› ä¸º <code>f</code> æœ‰å¯èƒ½åœ¨è°ƒç”¨å®Œå‚æ•°ä¹‹åï¼Œè®©è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯ <code>Animal</code> ï¼ˆåŠ¨ç‰©ï¼‰ç‹—å«ã€‚å¹¶éæ‰€æœ‰åŠ¨ç‰©éƒ½ä¼šç‹—å«ã€‚</p>
<p><strong>4. æˆ‘ä»¬å‡è®¾ <code>g : Animal â†’ Greyhound</code>ï¼Œ <code>f(g)</code> çš„ç±»å‹æ˜¯å¦å®‰å…¨ï¼Ÿ</strong></p>
<p>æ˜¯çš„ï¼Œå®ƒçš„ç±»å‹æ˜¯å®‰å…¨çš„ã€‚é¦–å…ˆï¼Œ<code>f</code> å¯èƒ½ä¼šä»¥ä»»ä½•ç‹—çš„å“ç§æ¥ä½œä¸ºå‚æ•°è°ƒç”¨ï¼Œè€Œæ‰€æœ‰çš„ç‹—éƒ½æ˜¯åŠ¨ç‰©ã€‚å…¶æ¬¡ï¼Œå®ƒå¯èƒ½ä¼šå‡è®¾ç»“æœæ˜¯ä¸€æ¡ç‹—ï¼Œè€Œæ‰€æœ‰çš„ç°ç‹—éƒ½æ˜¯ç‹—ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼šåœ¨å¯¹ç±»å‹åˆ†åˆ«è°ƒç”¨å¦‚ä¸‹çš„ç±»å‹æ„é€ å™¨ä¹‹åï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MakeFunction&lt;T&gt; = <span class="function">(<span class="params">arg: T</span>) =&gt;</span> <span class="built_in">void</span></span><br></pre></td></tr></table></figure>
<p>çˆ¶å­ç±»å‹å…³ç³»é€†è½¬äº†(ç”¨ä¸Šé¢çš„é¢˜æ¥ç†è§£ï¼šAnimal â†’ Greyhoundæ˜¯Dog -&gt; Dogçš„å­ç±»å‹ï¼Œä½†æ˜¯Animalå´æ˜¯Dogçš„çˆ¶ç±»å‹)ï¼Œè¿™å°±æ˜¯ **<code>é€†å˜ï¼ˆContravarianceï¼‰</code>**ã€‚</p>
<p>é€šè¿‡ è¿™ä¸ªä¾‹å­å¯ä»¥å‘ç°ï¼š</p>
<ul>
<li>è¿”å›å€¼ -&gt; åå˜ï¼ˆGreyhound -&gt; Dogï¼‰</li>
<li>å…¥å‚é€šå¸¸åº”è¯¥ä¸ºé€†å˜ï¼ˆAnimal &lt;- Dogï¼‰</li>
</ul>
<h3 id="åŒå‘åå˜"><a href="#åŒå‘åå˜" class="headerlink" title="åŒå‘åå˜"></a>åŒå‘åå˜</h3><p>TSé¸­å­ç±»å‹ç³»ç»Ÿï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡ç»“æ„ä¸€è‡´ï¼Œå°±è®¤ä¸ºæ˜¯åŒä¸€ç§ç±»å‹ï¼Œè€Œä¸éœ€è¦ä¸¤è€…çš„å®é™…ç±»å‹æœ‰æ˜¾å¼çš„ç»§æ‰¿å…³ç³»ã€‚</p>
<h3 id="å‡½æ•°å±æ€§ä¸å‡½æ•°æ–¹æ³•"><a href="#å‡½æ•°å±æ€§ä¸å‡½æ•°æ–¹æ³•" class="headerlink" title="å‡½æ•°å±æ€§ä¸å‡½æ•°æ–¹æ³•"></a>å‡½æ•°å±æ€§ä¸å‡½æ•°æ–¹æ³•</h3><p>äº†è§£äº†è¿™ä¸¤ä¸ªæ¦‚å¿µä¹‹åæˆ‘ä»¬å¯ä»¥å¤§è‡´çŒœæµ‹åŒå‘åå˜å’Œä¸å˜çš„å®šä¹‰ï¼ŒåŒå‘åå˜é‚£å°±æ˜¯åˆå¯ä»¥åå˜åˆå¯ä»¥é€†å˜ï¼Œä¸å˜åä¹‹ï¼Œæ—¢ä¸èƒ½åå˜ä¹Ÿä¸èƒ½é€†å˜ï¼Œç°åœ¨æˆ‘ä»¬å…ˆåˆ°ä¹‹å‰å›°æƒ‘çš„åœ°æ–¹ï¼šinterface Props{}é‡Œé¢ä¸ºä»€ä¹ˆå»ºè®®ç”¨å‡½æ•°å±æ€§çš„å†™æ³•å®šä¹‰å‡½æ•°ç±»å‹ï¼Ÿ</p>
<p>ç”¨<a target="_blank" rel="noopener" href="https://github.com/microsoft/TypeScript/pull/18654">å®˜æ–¹</a>çš„ä¸¤ä¸ªä¾‹å­å†æ¬¡è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">let</span> f1: <span class="function">(<span class="params">x: Animal</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">let</span> f2: <span class="function">(<span class="params">x: Dog</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">let</span> f3: <span class="function">(<span class="params">x: Cat</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">f1 = f2;  <span class="comment">// Error with --strictFunctionTypes </span></span><br><span class="line">f2 = f1;  <span class="comment">// Ok</span></span><br><span class="line">f2 = f3;  <span class="comment">// Error</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªèµ‹å€¼åœ¨é»˜è®¤ç±»å‹æ£€æŸ¥æ¨¡å¼ä¸‹æ˜¯å…è®¸çš„ï¼Œä½†åœ¨ä¸¥æ ¼å‡½æ•°ç±»å‹æ¨¡å¼ä¸‹è¢«æ ‡è®°ä¸ºé”™è¯¯ã€‚ç›´è§‰ä¸Šï¼Œé»˜è®¤æ¨¡å¼å…è®¸èµ‹å€¼ï¼Œå› ä¸ºå®ƒ<em>å¯èƒ½æ˜¯</em>åˆç†çš„ï¼Œè€Œä¸¥æ ¼å‡½æ•°ç±»å‹æ¨¡å¼ä½¿å®ƒæˆä¸ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå®ƒä¸èƒ½<em>è¯æ˜æ˜¯</em>åˆç†çš„ã€‚åœ¨ä»»ä½•ä¸€ç§æ¨¡å¼ä¸‹ï¼Œç¬¬ä¸‰ä¸ªèµ‹å€¼éƒ½æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºå®ƒ<em>æ°¸è¿œä¸ä¼š</em>æ˜¯åˆç†çš„ã€‚</p>
<p>æè¿°ç¤ºä¾‹çš„å¦ä¸€ç§æ–¹å¼æ˜¯ï¼Œç±»å‹åœ¨é»˜è®¤ç±»å‹æ£€æŸ¥æ¨¡å¼ä¸‹<code>(x: T) =&gt; void</code>æ˜¯<em>åŒ</em>å˜çš„ï¼ˆå³åå˜<em>æˆ–</em>é€†å˜ï¼‰<code>T</code>ï¼Œä½†åœ¨ä¸¥æ ¼å‡½æ•°ç±»å‹æ¨¡å¼ä¸‹æ˜¯<em>é€†å˜</em>çš„<code>T</code>ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Comparer&lt;T&gt; &#123;</span><br><span class="line">    compare(a: T, <span class="attr">b</span>: T): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">let</span> animalComparer: Comparer&lt;Animal&gt;;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">let</span> dogComparer: Comparer&lt;Dog&gt;;</span><br><span class="line"></span><br><span class="line">animalComparer = dogComparer;  <span class="comment">// Ok because of bivariance</span></span><br><span class="line">dogComparer = animalComparer;  <span class="comment">// Ok (é€†å˜)</span></span><br></pre></td></tr></table></figure>
<p>åœ¨<code>--strictFunctionTypes</code>mode ä¸­ï¼Œä»ç„¶å…è®¸ç¬¬ä¸€ä¸ªèµ‹å€¼ï¼Œå› ä¸ºå®ƒ<code>compare</code>è¢«å£°æ˜ä¸ºä¸€ä¸ªæ–¹æ³•ã€‚å®é™…ä¸Šï¼Œ<code>T</code>æ˜¯åŒå˜çš„ï¼Œ<code>Comparer&lt;T&gt;</code>å› ä¸ºå®ƒä»…ç”¨äºæ–¹æ³•å‚æ•°ä½ç½®ã€‚ä½†æ˜¯ï¼Œæ›´æ”¹<code>compare</code>ä¸ºå…·æœ‰å‡½æ•°ç±»å‹çš„å±æ€§ä¼šå¯¼è‡´æ›´ä¸¥æ ¼çš„æ£€æŸ¥ç”Ÿæ•ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Comparer&lt;T&gt; &#123;</span><br><span class="line">    compare: <span class="function">(<span class="params">a: T, b: T</span>) =&gt;</span> <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">let</span> animalComparer: Comparer&lt;Animal&gt;;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">let</span> dogComparer: Comparer&lt;Dog&gt;;</span><br><span class="line"></span><br><span class="line">animalComparer = dogComparer;  <span class="comment">// Error</span></span><br><span class="line">dogComparer = animalComparer;  <span class="comment">// Ok</span></span><br></pre></td></tr></table></figure>
<p><strong>ç»“è®ºï¼šåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆæˆ–è€…strictFunctionTypesï¼‰ï¼šç±»å‹å®‰å…¨é—®é¢˜å°†å¾—åˆ°ä¿éšœï¼Œä¸ä¹‹ç›¸åçš„æ˜¯é»˜è®¤åŒå‘åå˜å°†å¯èƒ½ä½¿å¾—ä½ åœ¨ä½¿ç”¨ç±»å‹çš„æ—¶å€™å˜å¾—ä¸å®‰å…¨ï¼</strong></p>
<h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><p>å…ˆæŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼š<code>Array&lt;Dog&gt;</code> èƒ½å¦ä¸º <code>Array&lt;Animal&gt;</code> çš„å­ç±»å‹ï¼Ÿï¼ˆæ¥æºï¼šã€Šæ·±å…¥ç†è§£TypeScriptã€‹ï¼‰</p>
<p>å…ˆçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Animal &#123;</span><br><span class="line">  name: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Dog <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">  wang: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Cat <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">  miao: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dogs: <span class="built_in">Array</span>&lt;Dog&gt; = []</span><br><span class="line"><span class="keyword">const</span> animals: Animal[] = dogs</span><br><span class="line"><span class="comment">// Arrayå…¥å‚åœ¨tsä¸­æ˜¯åŒå‘åå˜çš„</span></span><br><span class="line">animals.push(<span class="keyword">new</span> Cat())</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåˆ—è¡¨æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œé‚£ä¹ˆç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå› ä¸ºç±»å‹å¾ˆå®‰å…¨ã€‚ä½†æ˜¯å‡å¦‚åˆ—è¡¨æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆç­”æ¡ˆç»å¯¹æ˜¯å¦å®šçš„ï¼</p>
<h4 id="å¯å˜æ•°æ®"><a href="#å¯å˜æ•°æ®" class="headerlink" title="å¯å˜æ•°æ®"></a>å¯å˜æ•°æ®</h4><p>å¦‚æœç¿»çœ‹typescriptçš„Arrayçš„ç±»å‹ï¼Œå¯ä»¥çœ‹åˆ°Arrayç±»å‹å®šä¹‰å†™çš„æ˜¯å‡½æ•°æ–¹æ³•ï¼Œå› æ­¤ï¼Œå®ƒçš„å…¥å‚æ˜¯åŒå‘åå˜çš„ï¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Array&lt;T&gt; &#123;</span><br><span class="line">    length: <span class="built_in">number</span>;</span><br><span class="line">    toString(): <span class="built_in">string</span>;</span><br><span class="line">    toLocaleString(): <span class="built_in">string</span>;</span><br><span class="line">    pop(): T | <span class="literal">undefined</span>;</span><br><span class="line">    push(...items: T[]): <span class="built_in">number</span>;</span><br><span class="line">    concat(...items: ConcatArray&lt;T&gt;[]): T[];</span><br><span class="line">    concat(...items: (T | ConcatArray&lt;T&gt;)[]): T[];</span><br><span class="line">    join(separator?: <span class="built_in">string</span>): <span class="built_in">string</span>;</span><br><span class="line">    reverse(): T[];</span><br><span class="line">    shift(): T | <span class="literal">undefined</span>;</span><br><span class="line">    slice(start?: <span class="built_in">number</span>, end?: <span class="built_in">number</span>): T[];</span><br><span class="line">    sort(compareFn?: <span class="function">(<span class="params">a: T, b: T</span>) =&gt;</span> <span class="built_in">number</span>): <span class="built_in">this</span>;</span><br><span class="line">    splice(start: <span class="built_in">number</span>, deleteCount?: <span class="built_in">number</span>): T[];</span><br><span class="line">    splice(start: <span class="built_in">number</span>, <span class="attr">deleteCount</span>: <span class="built_in">number</span>, ...items: T[]): T[];</span><br><span class="line">    unshift(...items: T[]): <span class="built_in">number</span>;</span><br><span class="line">    indexOf(searchElement: T, fromIndex?: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">    lastIndexOf(searchElement: T, fromIndex?: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">    every(callbackfn: <span class="function">(<span class="params">value: T, index: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> <span class="built_in">boolean</span>, thisArg?: <span class="built_in">any</span>): <span class="built_in">boolean</span>;</span><br><span class="line">    some(callbackfn: <span class="function">(<span class="params">value: T, index: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> <span class="built_in">boolean</span>, thisArg?: <span class="built_in">any</span>): <span class="built_in">boolean</span>;</span><br><span class="line">    forEach(callbackfn: <span class="function">(<span class="params">value: T, index: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> <span class="built_in">void</span>, thisArg?: <span class="built_in">any</span>): <span class="built_in">void</span>;</span><br><span class="line">    map&lt;U&gt;(callbackfn: <span class="function">(<span class="params">value: T, index: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> U, thisArg?: <span class="built_in">any</span>): U[];</span><br><span class="line">    filter&lt;S <span class="keyword">extends</span> T&gt;(callbackfn: <span class="function">(<span class="params">value: T, index: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> value is S, thisArg?: <span class="built_in">any</span>): S[];</span><br><span class="line">    filter(callbackfn: <span class="function">(<span class="params">value: T, index: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> <span class="built_in">any</span>, thisArg?: <span class="built_in">any</span>): T[];</span><br><span class="line">    reduce(callbackfn: <span class="function">(<span class="params">previousValue: T, currentValue: T, currentIndex: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> T): T;</span><br><span class="line">    reduce(callbackfn: <span class="function">(<span class="params">previousValue: T, currentValue: T, currentIndex: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> T, <span class="attr">initialValue</span>: T): T;</span><br><span class="line">    reduce&lt;U&gt;(callbackfn: <span class="function">(<span class="params">previousValue: U, currentValue: T, currentIndex: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> U, <span class="attr">initialValue</span>: U): U;</span><br><span class="line">    reduceRight(callbackfn: <span class="function">(<span class="params">previousValue: T, currentValue: T, currentIndex: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> T): T;</span><br><span class="line">    reduceRight(callbackfn: <span class="function">(<span class="params">previousValue: T, currentValue: T, currentIndex: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> T, <span class="attr">initialValue</span>: T): T;</span><br><span class="line">    reduceRight&lt;U&gt;(callbackfn: <span class="function">(<span class="params">previousValue: U, currentValue: T, currentIndex: <span class="built_in">number</span>, array: T[]</span>) =&gt;</span> U, <span class="attr">initialValue</span>: U): U;</span><br><span class="line">    [n: <span class="built_in">number</span>]: T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¯å˜æ•°ç»„+åŒå‘åå˜æ— æ³•ä¿è¯ç±»å‹å®‰å…¨</strong></p>
<h4 id="æ›´å®‰å…¨çš„æ•°ç»„ç±»å‹"><a href="#æ›´å®‰å…¨çš„æ•°ç»„ç±»å‹" class="headerlink" title="æ›´å®‰å…¨çš„æ•°ç»„ç±»å‹"></a>æ›´å®‰å…¨çš„æ•°ç»„ç±»å‹</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> MutableArray&lt;T&gt; &#123;</span><br><span class="line">		length: <span class="built_in">number</span>;</span><br><span class="line">    toString: <span class="built_in">string</span>;</span><br><span class="line">    toLocaleString(): <span class="built_in">string</span>;</span><br><span class="line">    pop: <span class="function">() =&gt;</span> T | <span class="literal">undefined</span>;</span><br><span class="line">    push: <span class="function">(<span class="params">...items: T[]</span>) =&gt;</span>  <span class="built_in">number</span>;</span><br><span class="line">    concat:<span class="function">(<span class="params">...items: ConcatArray&lt;T&gt;[]</span>) =&gt;</span> T[];</span><br><span class="line">    join: <span class="function">(<span class="params">separator?: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">string</span>;</span><br><span class="line">    reverse: <span class="function">() =&gt;</span> T[];</span><br><span class="line">    shift:<span class="function">() =&gt;</span> T | <span class="literal">undefined</span>;</span><br><span class="line">    slice:<span class="function">(<span class="params">start?: <span class="built_in">number</span>, end?: <span class="built_in">number</span></span>) =&gt;</span> T[];</span><br><span class="line">    sort:<span class="function">(<span class="params">compareFn?: (a: T, b: T) =&gt; <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">this</span>;</span><br><span class="line">    indexOf: <span class="function">(<span class="params">searchElement: T, fromIndex?: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span>;</span><br><span class="line">  	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆæ€è€ƒï¼šä¸ºä»€ä¹ˆï¼‰æ­¤æ—¶æˆ‘ä»¬ä¼šå‘ç°MutableArrayå…¶å®æ˜¯ä¸ªä¸å¯å˜ç±»å‹ï¼Œä¸å†èƒ½äº’ç›¸åˆ†é…</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dogs: MutableArray&lt;Dog&gt; = [] <span class="keyword">as</span> Dog[];</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"><span class="keyword">const</span> animals: MutableArray&lt;Animal&gt; = dogs;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> animals: MutableArray&lt;Animal&gt; = [] <span class="keyword">as</span> Animal[] ;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"><span class="keyword">const</span> dogs: MutableArray&lt;Dog&gt; = animals</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯Arrayç±»å‹æ—¢å­˜åœ¨é€†å˜æ–¹æ³•pushä¹Ÿå­˜åœ¨åå˜æ–¹æ³•popï¼ˆæ»¡è¶³ç›¸äº’åˆ†é…çš„æ¡ä»¶ï¼Ÿå‡è®¾æ»¡è¶³ï¼Œé‚£ä¹ˆMutableArray<Dog>å’ŒMutableArray<Animal>é‡Œé¢çš„popè·Ÿpushæ–¹æ³•å¦‚æœåšå…¼å®¹ï¼Ÿéœ€è¦åŒæ—¶æ»¡è¶³å‚æ•°é€†å˜å’Œè¿”å›å€¼åå˜æ‰èƒ½å…¼å®¹ï¼‰</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li>å¯ä»¥ä½¿ç”¨readonlyæ¥æ ‡è®°å±æ€§ï¼Œä½¿å…¶ä¸å¯å˜</li>
<li>æ›´å¤šåœ°ä½¿ç”¨å‡½æ•°å±æ€§è€Œä¸æ˜¯å‡½æ•°æ–¹æ³•æ¥å®šä¹‰ç±»å‹</li>
<li>å°è¯•è®©ç±»å‹ä¸­çš„åå˜æˆ–è€…é€†å˜åˆ†å¼€ï¼Œæˆ–è€…è®©ç±»å‹ä¸å¯å˜</li>
<li>å°½å¯èƒ½é¿å…åŒå‘åå˜</li>
</ul>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p>[1]@typescript-eslint/method-signature-style: <em><a target="_blank" rel="noopener" href="https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/docs/rules/method-signature-style.md">https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/docs/rules/method-signature-style.md</a></em></p>
<p>[2]PR: <em><a target="_blank" rel="noopener" href="https://github.com/microsoft/TypeScript/pull/18654">https://github.com/microsoft/TypeScript/pull/18654</a></em></p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">æˆ‘å¾ˆå¯çˆ±ï¼Œè¯·ç»™æˆ‘é’±</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/cong1223/cloudimg@master/img/20210131143747.jpeg"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/cong1223/cloudimg@master/img/20210131143747.jpeg" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/cong1223/cloudimg@master/img/20210131143944.jpeg"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/cong1223/cloudimg@master/img/20210131143944.jpeg" alt="QQ æ”¯ä»˜" title="QQ æ”¯ä»˜"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/cong1223/cloudimg@master/img/20210131143746.jpeg"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/cong1223/cloudimg@master/img/20210131143746.jpeg" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>å°èªå¿™</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://cong1223.github.io/2022/12/13/TypeScript-%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8/" title="TypeScript ç±»å‹å®‰å…¨">https://cong1223.github.io/2022/12/13/TypeScript-%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> è®¸å¯åè®®ã€‚</li></ul></section></article><div class="post-nav"><div class="post-nav-item"></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/01/16/%E7%94%A8js%E7%8E%A9%E8%BD%ACScriptable%EF%BC%8C%E8%B6%85%E7%AE%80%E5%8D%95%E6%95%99%E7%A8%8B/" rel="next" title="ç”¨jsç©è½¬Scriptableï¼Œè¶…ç®€å•æ•™ç¨‹"><span class="post-nav-text">ç”¨jsç©è½¬Scriptableï¼Œè¶…ç®€å•æ•™ç¨‹</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>ç‚¹å‡»æŒ‰é’®è·³è½¬ GitHub Issues è¯„è®ºã€‚</span><br><span>è‹¥æ²¡æœ‰æœ¬æ–‡ Issueï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Comment æ¨¡ç‰ˆæ–°å»ºã€‚</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/cong1223/cong1223.github.io/issues?q=is:issue+TypeScript ç±»å‹å®‰å…¨">GitHub Issues</a><a class="hty-button hty-button--raised" id="github-discussions" target="_blank" rel="noopener" href="https://github.com/cong1223/cong1223.github.io/discussions/new">GitHub Discussions</a></div><div id="disqus_thread"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@latest/dist/disqusjs.css"><script src="https://cdn.jsdelivr.net/npm/disqusjs@latest/dist/disqus.js"></script><script>const disqusjsConfig = {"enable":true,"shortname":"ghostwang-com"}
function loadDisqus() {
  const dsqjs = new DisqusJS(disqusjsConfig)
}</script><script src="/js/comments/disqus.js"></script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">è‹ICPå¤‡17038157å·</a></div><div class="copyright"><span>&copy; 2021 â€“ 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> å°èªå¿™</span></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div></div></body></html>